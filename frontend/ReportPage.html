<!DOCTYPE html>
<!--This tage ensures were running HTML5 verison-->
<html> <!--This tag is used for all HTML elements for your webpage-->
<head>
    <script src="https://kit.fontawesome.com/5999306913.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ReportPage</title>
    <link rel = "stylesheet" href = "Ribbon.css">
    <link rel = "stylesheet" href = "ProductThumbnail.css">
    <link rel = "stylesheet" href = "footer.css">
    <link rel = "stylesheet" href = "ReportPageCSS.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
    <!--Imported bootstrap. A popular css library that has pre-created css properties and values that you can use. Essenitally makes applying css to elements easier-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src = "FactoryMethod.js" defer></script>
    <!-- Add Firebase SDKs via CDN 
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    -->


    


    
    <style>
    /** The inline style sheet for the search filter **/
    a:hover{
        text-decoration: none !important;
    }

        .product {
			border: 3px solid darkgreen;
            border-radius: 25px;
			padding: 10px;
			margin: 10px;
			width: 200px;
			display: inline-block;
		}
	.container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
	#filterInput {
            margin-bottom: 20px;
            padding: 10px;
            width: calc(100% - 20px);
            font-size: 16px;
            border: 1px solid green;
            border-radius: 5px;
        }

        #list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .listItem {
            padding: 10px;
            margin: 5px 0;
            background-color: #f9f9f9;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .listItem:hover {
            background-color: #e9e9e9;
        }

        .hidden {
            display: none; /** Prevents the element from being seen **/
        }
    </style>

   

    
    
</head><!--The head tag takes metadata tags that are related to the document. You can insert .css exteranl files-->

<body>
    <nav class="navbar navbar-expand-lg" style="background-color: rgb(8, 98, 8) !important;">
        <div class="container-fluid">
          <div class = "button-container">
          <a href = "FrontPage.html">
          <button id = "MainButton"><img src="images/Warriors.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top"></button>
          <div class = "hover-message">Home
          <i class="fa-solid fa-house" id = "HomeIcon"></i>
          </div>
          </a>
          </div>
          <i class="fa-solid fa-user" id = "ProfileIcon"></i>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Profile</a>
              </li>
              <i class="fa-solid fa-bell"></i>
              <li class="nav-item">

                <a class="nav-link" href="Sellpageintro.html">Sell</a>

              </li>
              <i class="fa-solid fa-cart-shopping" id = "i4"></i>
              <li class="nav-item">
                <a class="nav-link" href="#">Cart</a>
              </li>
              <i class="fa-solid fa-gear" id = "i5"></i>
              <li class="nav-item">
                <a class="nav-link" href="#">Settings</a>
              </li>
              <i class="fa-solid fa-envelope" id = "i3"></i>
              <li class="nav-item">
                <a class="nav-link" href="#">Messages</a>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" id = "RightButton" type="submit"><i class="fa-solid fa-magnifying-glass" id = "searchicon"></i></button>
            </form>
          </div>
        </div>
      </nav>
    
     
      
      <h3 id = "NavText">Wayne State University</h3>


      <div class = box1>
        <i class="fa-solid fa-user-secret"></i>
        <h3>Report Malicious Activity</h3>
        <hr>

        <h6>Fill out the appropriate details below. You will bre emailed a Report of your submission along with a case number. Keep this as a record as you see fit!</h6>

        <form id = "ReportForum"> <!-- The form element houses all elements related to as form. Drop down menus, buttons, etc-->
        <!-- Also note that the value for the "for" attribute within the label element should match the value of the id attribute of the corresponding form element, only recommended-->   
            <!-- 
            1) drop down menu is created by the select element
            2) The contents/elements that appears in the drop down menu is the text surroundend by the option element
            3) the value for the value attribute in the option element is whats sent to the database/working with the js within the form.
            It's preferable for 2 == 3, but they can differ
             
            -->
            <div id = "SubjectStyle">
                <label for = "Subject">1. Who is at Fault?</label>
                <select id = "Subject">
                    <option value = "">Select An Option</option>
                    <option value = "User">User</option>
                    <option value = "Advisor">Advisor</option>
                    <option value = "System">System</option>
                </select>
            </div>

            <div id = "UserSelect" class = "hidden">
                <label for = "User">2. What did the User do?</label>
                <select id = "User">
                    <option value = "Choose an option">Choose an option</option>
                    <option value = "Inappropriate Photo">Inappropriate Photo</option>
                    <option value = "Spam">Spam</option>
                    <option value = "Scam Likely">Scam Likely</option>
                    <option value = "Hacked Account">Hacked Account</option>
                    <option value = "Phising">Phising</option>
                    <option value = "Other">Other</option>
                </select>
            </div>

            <div id = "AdvisorSelect" class = "hidden">
                <label for = "Advisor">2. What did the Advisor do?</label>
                <select id = "Advisor">
                    <option value = "Choose an option">Choose an option</option>
                    <option value = "Inappropriate Response">Inappropriate Photo</option>
                    <option value = "Spam">Spam</option>
                    <option value = "Scam Likely">Scam Likely</option>
                    <option value = "Hacked Account">Hacked Account</option>
                    <option value = "Phising">Phising</option>
                    <option value = "Other">Other</option>
                </select>
            </div>

            
            <div id = "SystemSelect" class = "hidden">
                <label for = "System">2. What did the System do?</label>
                <select id = "System">
                    <option value = "Choose an option">Choose an option</option>
                    <option value = "Hyperlink not working">Hyperlink not working</option>
                    <option value = "Button does not work">Button does not work</option>
                    <option value = "Product card glitchy">Product card glitchy</option>
                    <option value = "Profile editing issue">Profile editing issue</option>
                    <option value = "Security risk">Security Risk</option>
                    <option value = "Other">Other</option>
                </select>
            </div>

            <div id = "IssueTF" class = "hidden">
                <label for = "Issue">3. Describe your issue:</label>
                <textarea id = "Issue" maxlength="200" placeholder="Max 200 chars" required></textarea>            
            </div>

            <div id = "PhotoUpload" class = "hidden">
                <label for = "Photo"> 4. Upload a max of 4 Photos:</label>
                <div id = "StyleAll">
                    <input type = "file" id = "PhotoPU1" name = "Screenshot" accept = "image/*">
                    <input type = "file" id = "PhotoPU2" name = "Screenshot" accept = "image/*">
                    <input type = "file" id = "PhotoPU3" name = "Screenshot" accept = "image/*">
                    <input type = "file" id = "PhotoPU4" name = "Screenshot" accept = "image/*">
                </div>
            </div>

            <!-- The required attribute is a conditional that occurs if the user attempts to submit the form when the corresponding text field is empty, a msg will pop up on said text field, essenitally will only allow the forum to be subnmited once they're all valid values-->
            <div id = "NameField" class =  "hidden">
                <label for = "name"> 5. Your Name:</label>
                <input type = "text" id = "name" required>
            </div>


            <div id = "EmailField" class =  "hidden">
                <label for = "email"> 6. Your Email:</label>
                <input type = "email" id = "email" required>
            </div>


            <div id = "ButtonUpload" class = "hidden">
                <button type = "submit" >Submit</button>
            </div>

      


            

        </form>
        
      </div>

      
      <!-- The script element allows us to add js syntax -->
      <script>
        //The 2nd, 3rd, and 4th script element will only appear based on the value of what the user chooses for the 1st select element

        //store the 'select' element's ID in a variable via the div
        const Subject = document.getElementById('Subject');

        //Get the corresponding   elemt's and their DIV ID and store it in a variable
        //We use the div ID because the div ID has the class css selector hidden, the select element doesn't
        const UserSelect = document.getElementById('UserSelect')
        const AdvisorSelect = document.getElementById('AdvisorSelect')
        const SystemSelect = document.getElementById('SystemSelect');

        //Textarea element
        const IssueTF = document.getElementById('IssueTF');

        //input file type element
        const PhotoUpload = document.getElementById('PhotoUpload');

        //input name type element
        const NameField = document.getElementById('NameField');

        //input email type element
        const EmailField = document.getElementById('EmailField');

        //button element
        const ButtonUpload = document.getElementById('ButtonUpload');


       


        //Even Listener function to "hear" what the user chooses from Subject Select
        Subject.addEventListener('change', function(){
            //Hide the 2nd, 3rd, and 4th select!
            UserSelect.classList.add('hidden');
            AdvisorSelect.classList.add('hidden');
            SystemSelect.classList.add('hidden');

            IssueTF.classList.add('hidden');

            PhotoUpload.classList.add('hidden');

            ButtonUpload.classList.add('hidden');

            NameField.classList.add('hidden');

            EmailField.classList.add('hidden');


            //Using the conditional statements below, determine which coresponding select/dropdown menu appears
            //we use the corresponding select element ID in the conditional statement
            if(Subject.value === 'User'){
                UserSelect.classList.remove('hidden');
                IssueTF.classList.remove('hidden');
                PhotoUpload.classList.remove('hidden');
                ButtonUpload.classList.remove('hidden');
                NameField.classList.remove('hidden');
                EmailField.classList.remove('hidden');
            }
            else if(Subject.value === 'Advisor'){
                AdvisorSelect.classList.remove('hidden');
                IssueTF.classList.remove('hidden');
                PhotoUpload.classList.remove('hidden');
                ButtonUpload.classList.remove('hidden');
                NameField.classList.remove('hidden');
                EmailField.classList.remove('hidden');
            }
            else if(Subject.value === 'System'){
                SystemSelect.classList.remove('hidden');
                IssueTF.classList.remove('hidden');
                PhotoUpload.classList.remove('hidden');
                ButtonUpload.classList.remove('hidden');
                NameField.classList.remove('hidden');
                EmailField.classList.remove('hidden');


            }
        });

        

      </script>

      <script>
        //the funtions below are used to communicate to the FactoryMethod.js file. It will 
        window.onload = function(){

            //create a variable that stores the id of the select targeted element (working with the first select element)
            const SelectedSubject = document.getElementById('Subject');
            

            SelectedSubject.addEventListener('change', function() {

                //get the selected value from the attribute value for the element option (working with the first select element) 
                const SelectedSubjectValue = SelectedSubject.value;//Subject

                
                //Now create the variable that stores the id the chosen subject (working with the second select element)
                const SelectedSubject2 = document.getElementById(SelectedSubjectValue);

                    SelectedSubject2.addEventListener('change', function() {
                    //get the selected value from the attribute value for the element option (working with the second select element)
                    const SelectedSubject2Value = SelectedSubject2.value; //Issue

                    var object = CreateClass(SelectedSubjectValue, SelectedSubject2Value); //the return type for this function is an instance of a class

                    //using the object.synatx notation, invoke the proper method
                    object.Priorty();
                    //object.ticket(SelectedSubject2Value);
                    object.ticket();


                    });

            });
        };
      </script>

      <!-- This portion of javascript is used to upload the user data from the forum into our database (firebase) and send the user an email of the details they filled out -->
<script type = "module">
        // Import the functions you need from the SDKs you need, this is considered as ES6 synatx. In order to use it in a reg html script, you must declare the script as type module
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
       //import { getAnalytics } from "firebase/analytics";
        import {getFirestore, collection, addDoc} from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js"; //getFireStire - intialize the firestore database, collection -create the collection, document - add a document to the collection, all of which comes from the same single firestore module
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = { //this simply tells firebase which project we belong to on their webpage, not the tools nesseary to use their libraries and APIs. that would be the SDK
        apiKey: "AIzaSyDylHe_iXex8F3He6Ez4P49OmLPQMQ_J6k",
        authDomain: "sell-25f45.firebaseapp.com",
        databaseURL: "https://sell-25f45-default-rtdb.firebaseio.com",
        projectId: "sell-25f45",
        storageBucket: "sell-25f45.firebasestorage.app",
        messagingSenderId: "953873344669",
        appId: "1:953873344669:web:7b55ea629c5397a72a0c74",
        measurementId: "G-9DB3NVDSQJ"
    };

    // Initialize Firebase 
    const app = initializeApp(firebaseConfig);
    //const analytics = getAnalytics(app);
    //Initilaize firestore
    const db = getFirestore(app);

    //initalize firestore - the specific part of where we upload our data to firebase
    /**
     * Firestore stores that data into collections (folders) <-- Category
     * The different versions of said data is storted into documents (files)
     * */
     
    


    //Lines of code to upload the user data to our firebase
    document.getElementById("ReportForum").addEventListener("submit", async function(event) { //this function wont execute unless submit button has actually "submitted" or been executed itself
        event.preventDefault();

        //get the actual user data from the forum elements and store it into a variable
        let subject = document.getElementById("Subject").value;
        let reason = document.getElementById(subject).value;
        //dont use the id value from the div element that houses the forum elements, instead use the value of the id that is an attribute directly for the forum element, as this is where the .value property works
        let photo1 = document.getElementById("PhotoPU1").value;
        let photo2 = document.getElementById("PhotoPU2").value;
        let photo3 = document.getElementById("PhotoPU3").value;
        let photo4 = document.getElementById("PhotoPU4").value;
        let issue = document.getElementById("Issue").value;
        let name = document.getElementById("name").value;
        let email = document.getElementById("email").value;

        //now upload the data into firestore by creating the collection and use exception handling - try and catch block
        try{
            await addDoc(
                collection(db, "Reports"),
            {
                subject,
                reason,
                photo1,
                photo2,
                photo3,
                photo4,
                issue,
                name,
                email,
                timestamp: new Date().toISOString()
            }
        );
        alert("The Report has been uploaded, an email will be sent soon");
        document.getElementById("ReportForum").reset();
        }
        catch(e){
            console.error("error in uploading documents: ", e);
        } //catch block must be right after try block 

      
    
     

        
    });

</script>





     


      
    

    <!--footer-->
    <footer>
        <div class="footer-section">
          <img src="images/Warriors.png
          " height="85" alt=""
               loading="lazy" />
        <p>WSU MarketShare</p>
      </div>
      

        <div class="footer-section">
          <li>
            <a href="https://wayne.edu">Wayne State University</a></li>
       <li>
            <a href="https://www.google.com/maps/place/Welcome+Center,+42+W+Warren+Ave,+Detroit,+MI+48202/@42.3569923,-83.0677759,17z/data=!3m1!4b1!4m6!3m5!1s0x8824d2bc65c97381:0x6907f5eb914af2de!8m2!3d42.3569923!4d-83.065201!16s%2Fg%2F1tm8l666?entry=ttu&g_ep=EgoyMDI1MDIwMi4wIKXMDSoASAFQAw%3D%3D">42 W. Warren Avenue, Detroit, MI 48201</a></li>
      <li>
            <a href="#!">313-577-2424</a></li>
          <li>Made with ðŸ’š in Detroit</li>				
          </li>
      </div>
      <!--Grid column-->
        <div class="footer-section">
          <li>
            <a href="#top">Home</a></li>
       <li>
            <a href="Sellpageintro.html">Sell Page</a></li>
      <li>
            <a href="#!">Account</a></li>				
          </li>
      </div>
   <!--Grid column-->
        <div class="footer-section">
          <li>
            <a href="#!">FAQ</a></li>
       <li>
            <a href="#!">Support</a></li>
      <li>
            <a href="ReportPage.html">Report</a></li>				
          </li>
      </div>      

    </footer>

    </div>

   
    
    

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> 
</body>

</html>
